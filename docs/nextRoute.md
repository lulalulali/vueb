# route

## 基本知识

路由是每个app的框架
术语：tree  subtree root leaf
url segment和url path（domain后的 包含segments）
默认下，app文件夹里面组件是react的服务器组件
文件夹用来定义路由，文件夹中的文件用来创造ui
嵌套路由就是建子文件夹
嵌套路由中的文件习惯：
        layout区段及其子级的共享 UI
        page路由的唯一 UI，并使路由可公开访问
       loading加载区段及其子项的 UI
      not-found未找到区段及其子项的 UI
      error区段及其子项的错误 UI
      global-error全局错误 UI
      route服务器端 API 端点
      template专门的重新渲染的布局 UI
      default并行路由的回退 UI
装react组件的js文件也是嵌套的：
     layout.js
     template.js
     error.js (React error boundary)
     loading.js (React suspense boundary)
     not-found.js (React error boundary)
     page.js or nested layout.js
自己起名、造的js不能routable
根布局rootlayout：只有根布局包含html和body标记

## 页面和布局

模板template：为每个子级创建实例instance 适用于：useeffct和usestate记录页面浏览量和页面反馈表  ？ 更改默认框架行为  如Suspense Boundaries  对于回退，显示在每个导航上。

## 嵌套路由

好的，让我们通过一个生活中的故事来理解什么是嵌套路由。

故事：小猫的冒险之旅**

有一天，小猫决定踏上一场冒险之旅，探索它所居住的大树。大树的每一层都有不同的景色和奇遇等待着小猫。

### 1. 单层路由

刚开始，小猫走进了大树的第一层，这一层是一个广阔的花园，有着各种美丽的花朵。这就像是我们通常见到的单层路由，用户只能在这一层进行导航，就像在花园里漫步一样。

### 2. 嵌套路由

在花园里，小猫发现了一扇神秘的门，打开门后，它进入了大树的第二层。这一层是一个茂密的森林，充满了神秘和冒险。这就是嵌套路由的概念，小猫通过打开花园这一层的某个门，进入了更深层次的探险。

在软件开发中，嵌套路由就像是在一个页面中嵌套另一个页面。例如，一个博客网站可能有一个主页面（类似花园），然后在主页面中有文章列表，点击文章后进入文章详情页（类似森林），这就形成了嵌套路由的结构。

### 3. 层层深入

小猫在森林里继续冒险，又发现了一条小道通向大树的更深层。这样的嵌套可以一直进行，就像打开一扇扇门，不断探索大树的各个层次。

在软件开发中，嵌套路由可以一层一层深入，形成复杂的页面结构。这种结构使得开发者可以更好地组织和管理页面，提高用户体验。

通过这个小猫的冒险之旅，我们可以更好地理解嵌套路由是如何在网站或应用中实现多层次导航和页面结构的。

## 动态路由

好的，我们通过一个故事来理解什么是动态路由。

故事：小汽车的旅行**

有一天，一辆小汽车准备踏上一场穿越城市的旅行。这辆小汽车的目的地是由用户选择的，每次都不同。

### 1. 静态路由

最初，小汽车只能按照固定的路线行驶，就像我们通常的静态路由。无论用户选择什么目的地，小汽车都会按照预定的路线行驶。

### 2. 动态路由

然而，小汽车希望能够根据用户的选择灵活调整行驶路线。这时，就引入了动态路由的概念。小汽车会根据用户输入的目的地，动态计算出一条最优的路线。

在软件开发中，动态路由允许我们根据用户的输入或其他条件，在运行时决定页面的展示内容。例如，一个博客网站可能有一个动态路由，根据不同的文章ID动态加载对应的文章内容页面。

### 3. 用户选择目的地

每次小汽车的旅行开始前，用户都会选择一个目的地。这个目的地就像是动态路由中的参数，影响着行驶的路线。

在软件中，动态路由的参数可以是用户的输入、URL中的一部分或其他条件。这使得页面可以根据这些参数来呈现不同的内容。

通过这个小汽车的旅行故事，我们可以更好地理解动态路由是如何根据条件动态调整页面内容的，使用户体验更加灵活和个性化。

## 路由组和文件夹

好的，让我们通过一个故事来理解什么是路由组和专用文件夹。

故事：城市中的商店街**

在一座繁忙的城市里，有一片热闹的商店街，各种各样的商店和服务点散布其中。城市的规划者们决定为商店街引入一些新的概念，以使其更加有序和易于管理。

### 1. 商店街的划分

最初，商店街上的商店和服务点都随意地摆放在一起。这样虽然热闹，但难以管理和维护。于是，规划者们决定划分商店街，将相似类型的商店放在一组，比如将所有餐馆放在一组、所有服装店放在一组。

### 2. 路由组

为了更好地组织商店街，规划者们引入了“路由组”的概念。每个路由组代表一组相似的商店。比如，有一个路由组是“餐馆组”，包含了所有餐馆的位置；另一个路由组是“服装组”，包含了所有服装店的位置。

### 3. 专用文件夹

为了进一步提高商店街的整体管理效率，规划者们决定为每个路由组创建一个专用文件夹。在这个文件夹中，他们可以存放与该组相关的所有文件和信息，比如餐馆组的文件夹里有餐馆的菜单、促销信息等。

在软件开发中，我们也可以将这个概念应用到项目的路由结构中。路由组就好比项目中的一组相关页面，而专用文件夹则是存放与该组相关的文件、组件等的地方。

通过这个商店街的故事，我们可以更容易理解路由组和专用文件夹是如何帮助组织和管理项目的，使其更加清晰和易于维护。

## 并行路由和拦截路由

让我们通过一个故事来理解什么是并行路由和拦截路由。

故事：王国中的信使**

在一个幻想的王国里，有一条复杂的道路通向王城。这条道路上有很多交叉口和分支，连接着各个城镇和村庄。为了保证王国中的信息传递迅速而高效，王国决定使用信使系统。

### 1. 信使系统的起源

王国内设有多个信使站点，每个站点都负责传递信息到特定的目的地。这些站点就好比项目中的路由。

### 2. 并行路由

有一天，王国决定引入并行路由的概念。这意味着王国的信息可以同时被多个信使站点传递，而不是被限制在单一的路径。这使得信息传递更加高效，因为不同的信使可以同时执行任务，到达目的地的时间更短。

在软件开发中，这就是并行路由的概念。它允许应用程序同时处理多个路由，提高性能和响应速度。

### 3. 拦截路由

然而，为了确保信息的安全和准确性，王国决定引入拦截系统。拦截系统是一组检查和验证信息的站点，确保它们符合王国的规定。如果信息不符合规定，拦截站点可以阻止它进入下一阶段的传递。

在软件开发中，拦截路由就是一种在信息传递过程中执行特定操作或检查的机制。它可以用于验证用户身份、处理权限等任务。

通过这个信使系统的故事，我们可以更好地理解并行路由和拦截路由在软件开发中的应用，提高了应用的效率和安全性。

## seo

SEO，即搜索引擎优化，是一种通过调整网站内容和结构，提高网站在搜索引擎中排名的过程。现在，让我们通过一个故事来理解SEO的性质。

故事：小镇的新书店**

在一个宁静的小镇上，有一家新开的书店，店主是一位热爱书籍的年轻人。他希望将他的书店引入更多的人，让更多的人了解和喜欢他的书店。

### 1. 书店的存在

一开始，这家书店并不为人所知。它位于小镇的一条小巷里，很难被找到。这就好比一个新的网站，刚开始在互联网上存在，但很少有人知道。

### 2. SEO的引入

书店主人听说了一种神奇的方法，可以让更多的人找到他的书店。这就是SEO，搜索引擎优化。他决定采取一些措施，使得搜索引擎更容易发现他的书店。

### 3. 优化的步骤

首先，他为书店的外部贴上了一些告示，告诉大家这里有很多好书。这就好比在网站上添加了一些高质量的外部链接。

然后，他精心设计了书店的招牌，使得路过的人一眼就能看到。这就类似于在网站上创建了清晰而吸引人的页面标题和描述。

接着，他将书店的分类整理得井井有条，方便顾客找到自己感兴趣的书籍。这就像在网站上创建了良好的网站结构，方便用户导航。

最后，他定期在书店的窗户上更新最新的书籍信息，让路人一看就知道有新书到货。这就相当于在网站上定期更新和发布新的内容。

### 4. 成果

随着时间的推移，由于SEO的引入，书店逐渐变得热闹起来。越来越多的人通过搜索引擎找到了这家书店，生意也越来越好。

通过这个故事，我们可以理解SEO是如何通过一系列优化措施，提高网站在搜索引擎中的曝光度，吸引更多访问者的过程。

## 页面是服务器组件 评论区是客户端组件

假设你正在构建一个使用 Next.js 的网站，其中有一个页面展示你的博客文章。在默认情况下，这个页面可能是服务器组件，也就是说，当用户首次访问这个页面时，服务端会生成 HTML，并将其发送给用户的浏览器。这样做的好处是，搜索引擎可以更轻松地索引这个页面，因为它在访问时就已经有了完整的内容。

现在，假设你的博客页面有一些交互式的部分，例如评论框或动态加载的内容。如果你希望在用户与页面交互时，不用每次都向服务器请求新的 HTML，而是直接在浏览器中处理这些交互，你可以将这个页面设置为客户端组件。

让我们用一个故事来解释这个过程：

**故事开始：**

你有一个博客页面，当用户访问时，服务器会生成一个包含所有文章内容的 HTML，并将其发送给用户。这就是默认的服务器组件行为。用户能够很快看到页面内容，搜索引擎也能轻松索引。

然而，你决定在页面上添加一些实时的评论功能。如果每次有人发表评论时都要刷新整个页面，这可能会影响用户体验，因为页面需要重新加载。所以，你决定将评论部分设置为客户端组件。

**变化发生：**

现在，当用户访问博客页面时，服务器仍会生成包含文章内容的 HTML，但评论部分不会被包含在内。相反，页面会包含一些客户端代码，该代码在用户的浏览器中执行，异步加载并渲染评论部分。这使得用户在阅读文章的同时，评论部分可以独立地从服务器获取数据，实现实时更新，而无需刷新整个页面。

**总结：**

通过将评论部分设置为客户端组件，你在保留搜索引擎友好的同时，实现了更好的用户体验，因为用户在交互时不需要等待整个页面刷新。

这就是将页面设置为服务器组件或客户端组件的一种实际应用情境的故事。

## 带参不带参路由 optional

在 Next.js 中，"带参数的路由"指的是使用动态路由的情况，即使用方括号 `[]` 来定义路由参数的模式。例如：

```jsx
// 带参数的路由
/pages/[id].js
```

在这个例子中，`[id]` 表示一个动态路由参数，这个页面会匹配类似 `/pages/1`、`/pages/2` 等带有具体 id 值的路径。

"不带参数的路由"则是指没有动态路由参数的路由，例如：

```jsx
// 不带参数的路由
/pages/about.js
```

在这个例子中，`about.js` 表示一个不带参数的路由，它只匹配 `/pages/about` 路径。

现在，关于 "optional" 的情况，当你使用方括号 `[]` 中的 `...`（省略号）来表示可选参数时，即将参数标记为 "optional"，这意味着该参数可以出现在路由中，也可以不出现。例如：

```jsx
// optional 参数
/pages/[id].js
```

这个路由可以匹配 `/pages/1`，也可以匹配 `/pages/`，其中 `/pages/` 表示 `id` 是可选的，可以出现也可以不出现。

总结一下：

- "带参数的路由"使用动态路由参数，例如 `/pages/[id].js`。
- "不带参数的路由"不使用动态路由参数，例如 `/pages/about.js`。
- "Optional 参数"表示参数是可选的，可以出现也可以不出现，例如 `/pages/[id].js` 可以匹配 `/pages/`。
